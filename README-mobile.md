# 道威管理系统 - PC端与移动端分离架构

## 架构概述

本项目采用了PC端与移动端完全分离的架构设计，可以根据设备类型自动加载对应的界面和路由。同时也支持通过不同的入口页面强制使用PC版或移动版。

## 目录结构

```
src/
  ├── pc/               # PC端相关代码
  │   ├── App.vue       # PC端主组件
  │   ├── components/   # PC端组件
  │   └── router/       # PC端路由
  │
  ├── mp/               # 移动端相关代码
  │   ├── App.vue       # 移动端主组件
  │   ├── components/   # 移动端组件
  │   └── router/       # 移动端路由
  │
  ├── core/             # 共享核心代码
  ├── stores/           # 共享状态管理
  ├── assets/           # 共享资源
  └── main.ts           # 入口文件(包含设备检测)
```

## 设备检测逻辑

系统通过以下方式检测设备类型：

1. 用户代理(User Agent)检测
2. 屏幕宽度检测（默认小于768px为移动设备）
3. 强制标记（通过HTML入口页面设置）

## 入口页面

系统提供了三个HTML入口页面：

1. `index.html` - 主入口，自动检测设备类型
2. `pc-index.html` - PC端入口，强制使用PC版
3. `mp-index.html` - 移动端入口，强制使用移动端版

## 路由配置

PC端和移动端分别有独立的路由配置：

- PC端: `src/pc/router/index.ts`
- 移动端: `src/mp/router/index.ts`

## 组件开发指南

### 共享组件

对于PC端和移动端共享的逻辑，应放置在`src/core`和`src/stores`目录下。

### 移动端组件开发

在移动端组件开发时应注意：

1. 使用响应式布局，适配不同手机屏幕
2. 优化触摸交互，增加点击区域
3. 简化UI，确保在小屏幕上的可用性
4. 考虑网络条件，优化资源加载

### PC端组件开发

PC端组件可以利用更大的屏幕空间，提供更丰富的交互和展示。

## 构建配置

Vite配置支持多入口构建，可以分别构建PC端和移动端版本：

```javascript
build: {
  rollupOptions: {
    input: {
      main: './index.html',
      pc: './pc-index.html',
      mp: './mp-index.html',
    },
  }
}
```

## 使用方式

1. 访问主入口 `index.html`，系统会自动判断设备类型
2. 访问 `pc-index.html` 强制使用PC版
3. 访问 `mp-index.html` 强制使用移动版

## 开发与调试

可以通过修改浏览器的User Agent或使用开发者工具的设备模拟功能来测试不同设备上的表现。

## 后续扩展

此架构设计可支持将来的扩展，如添加微信小程序、App等其他终端的支持。 